<!DOCTYPE html>
<html>
<head>
	<title>My new website</title>
	<link rel="stylesheet" href="style.css" />
</head>
<body>
 
	<div class="header">
		<h1 id = "heading">Chessboard Test </h1>
	</div>
	<button>
	<a class="fwBtn fwBtn--text" id="newGame" onclick="newGame()">NewGame</a>
	</button>
<table>
	<tr>
			<td bgcolor="grey" width="40px" height="40px" id="field.0.0" onclick="clickHandler('field.0.0')"></td>
			<td bgcolor="grey"width="40px" height="40px" id="field.0.1" onclick="clickHandler('field.0.1')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.0.2" onclick="clickHandler('field.0.2')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.0.3" onclick="clickHandler('field.0.3')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.0.4" onclick="clickHandler('field.0.4')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.0.5" onclick="clickHandler('field.0.5')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.0.6" onclick="clickHandler('field.0.6')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.0.7" onclick="clickHandler('field.0.7')"></td>
	</tr>
	<tr>
			<td bgcolor="grey" width="40px" height="40px" id="field.1.0" onclick="clickHandler('field.1.0')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.1.1" onclick="clickHandler('field.1.1')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.1.2" onclick="clickHandler('field.1.2')" ></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.1.3" onclick="clickHandler('field.1.3')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.1.4" onclick="clickHandler('field.1.4')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.1.5" onclick="clickHandler('field.1.5')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.1.6" onclick="clickHandler('field.1.6')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.1.7" onclick="clickHandler('field.1.7')"></td>
	</tr>
	<tr>
			<td bgcolor="grey" width="40px" height="40px" id="field.2.0" onclick="clickHandler('field.2.0')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.2.1" onclick="clickHandler('field.2.1')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.2.2" onclick="clickHandler('field.2.2')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.2.3" onclick="clickHandler('field.2.3')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.2.4" onclick="clickHandler('field.2.4')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.2.5" onclick="clickHandler('field.2.5')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.2.6" onclick="clickHandler('field.2.6')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.2.7" onclick="clickHandler('field.2.7')"></td>

	</tr>
	<tr>
			<td bgcolor="grey" width="40px" height="40px" id="field.3.0" onclick="clickHandler('field.3.0')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.3.1" onclick="clickHandler('field.3.1')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.3.2" onclick="clickHandler('field.3.2')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.3.3" onclick="clickHandler('field.3.3')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.3.4" onclick="clickHandler('field.3.4')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.3.5" onclick="clickHandler('field.3.5')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.3.6" onclick="clickHandler('field.3.6')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.3.7" onclick="clickHandler('field.3.7')"></td>
	</tr>
	<tr>
			<td bgcolor="grey" width="40px" height="40px" id="field.4.0" onclick="clickHandler('field.4.0')" ></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.4.1" onclick="clickHandler('field.4.1')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.4.2" onclick="clickHandler('field.4.2')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.4.3" onclick="clickHandler('field.4.3')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.4.4" onclick="clickHandler('field.4.4')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.4.5" onclick="clickHandler('field.4.5')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.4.6" onclick="clickHandler('field.4.6')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.4.7" onclick="clickHandler('field.4.7')"></td>
	</tr>
	<tr>
			<td bgcolor="grey" width="40px" height="40px" id="field.5.0" onclick="clickHandler('field.5.0')" ></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.5.1" onclick="clickHandler('field.5.1')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.5.2" onclick="clickHandler('field.5.2')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.5.3" onclick="clickHandler('field.5.3')"></td>
            <td bgcolor="grey" width="40px" height="40px" id="field.5.4" onclick="clickHandler('field.5.4')"> </td>
			<td bgcolor="grey" width="40px" height="40px" id="field.5.5" onclick="clickHandler('field.5.5')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.5.6" onclick="clickHandler('field.5.6')"></td>
			<td bgcolor="grey" width="40px" height="40px" id="field.5.7" onclick="clickHandler('field.5.7')"></td>
	<tr>
		<td bgcolor="grey" width="40px" height="40px" id="field.6.0" onclick="clickHandler('field.6.0')" ></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.6.1" onclick="clickHandler('field.6.1')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.6.2" onclick="clickHandler('field.6.2')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.6.3" onclick="clickHandler('field.6.3')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.6.4" onclick="clickHandler('field.6.4')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.6.5" onclick="clickHandler('field.6.5')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.6.6" onclick="clickHandler('field.6.6')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.6.7" onclick="clickHandler('field.6.7')"></td>
	</tr>
	<tr>
		<td bgcolor="grey" width="40px" height="40px" id="field.7.0" onclick="clickHandler('field.7.0')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.7.1" onclick="clickHandler('field.7.1')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.7.2" onclick="clickHandler('field.7.2')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.7.3" onclick="clickHandler('field.7.3')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.7.4" onclick="clickHandler('field.7.4')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.7.5" onclick="clickHandler('field.7.5')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.7.6" onclick="clickHandler('field.7.6')"></td>
		<td bgcolor="grey" width="40px" height="40px" id="field.7.7" onclick="clickHandler('field.7.7')"></td>
	</tr>
	
</table>

<script>
	

	var boardXSize = 7;
	var boardYSize = 7;
    var chessboard=[
                    ["", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", ""],
					["", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", ""],
                   ];
                     

	function clickHandler(nodeID){  
        var nodeIdSplited = nodeID.split(".");
        console.log(nodeIdSplited);
		var x = parseInt(nodeIdSplited[1]);
        var y = parseInt(nodeIdSplited[2]);
        var hiddenObject = chessboard[x][y];
        if(hiddenObject=="bomb"){
			document.getElementById(nodeID).innerHTML = "<img src='bomb.svg'>";
		}else{		
			var bombs = bombCount(x,y);
			document.getElementById(nodeID).innerHTML = bombs;
			// if(hiddenObject=="treasure"){
			// 	document.getElementById(nodeID).innerHTML = "<img src='treasure.svg'>";
			// }
		}

		document.getElementById(nodeID).style.backgroundColor="white";
	}	

	function newGame(){
		document.getElementById('NewGame');
		for(x = 0;x < 8; x = x + 1 ){
			for(y = 0;y < 8; y = y + 1){
				if (Math.random() < 0.3){
					chessboard[x][y]="bomb";
				}else if(Math.random() > 0.9){
					chessboard[x][y]="treasure";
				}else{
					chessboard[x][y] = "";
				}

			}
		}	
	
	}

	
	function bombCount(x,y){
		var count = 0;
		if(y > 0 && chessboard[x][y - 1] == "bomb" ){
			count = count + 1; 
		}
		if(chessboard[x][y + 1] == "bomb" ){
			count = count + 1; 
		}
		if(x > 0 && chessboard[x - 1][y] == "bomb" ){
			count = count + 1; 
		}
		if(x < boardXSize &&  chessboard[x + 1][y] == "bomb" ){
			count = count + 1; 
		}
		if(x > 0 && y > 0 && chessboard[x - 1][y - 1] == "bomb" ){
			count = count + 1; 
		}
		if(x < boardXSize && chessboard[x + 1][y + 1] == "bomb" ){
			count = count + 1; 
		}
		if(x > 0 && chessboard[x - 1][y + 1] == "bomb" ){
			count = count + 1; 
		}
		if(y > 0 && x < boardXSize && chessboard[x + 1][y - 1] == "bomb" ){
			count = count + 1; 
		}
		
		return count;
	}           

	newGame();

</script>

</body>
</html>      